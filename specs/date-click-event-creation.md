# 기능 명세: 날짜 클릭으로 일정 생성 기능

## 질문 및 답변

### Q1: 날짜 셀 클릭 범위

**질문**: 현재 월/주 뷰에서 날짜 셀 전체(TableCell)를 클릭할 수 있게 할까요,
아니면 날짜 숫자 부분만 클릭 가능하게 할까요?

**답변**: 날짜 셀 전체(TableCell)를 클릭할 수 있게 합니다.

### Q2: 기존 일정이 있는 셀 클릭 동작

**질문**: 일정이 이미 있는 날짜 셀을 클릭했을 때 어떻게 동작할까요?

**답변**: B) 클릭 동작을 무시합니다. (기존 일정이 있는 셀은 클릭해도 아무
동작도 하지 않음)

### Q3: 시간 기본값 설정

**질문**: 날짜를 클릭했을 때 시작/종료 시간은 기본값을 설정할까요, 아니면 현재
시간을 기준으로 할까요?

**답변**: A) 빈 값으로 유지합니다. (사용자가 직접 입력해야 함)

### Q4: 편집 모드 처리

**질문**: 현재 편집 중인 일정이 있을 때 날짜를 클릭하면 어떻게 할까요?

**답변**: 다이얼로그로 선택하게 합니다. 편집 모드를 취소하고 새 일정을 생성할지, 아니면 편집 모드를 유지할지 사용자가 선택할 수 있습니다.

### Q5: 월/주 뷰 동작

**질문**: 월 뷰와 주 뷰 모두에서 동일하게 동작할까요, 아니면 특정 뷰에서만
동작할까요?

**답변**: A) 월 뷰와 주 뷰 모두에서 동일하게 동작합니다.

### Q6: 사용자 피드백

**질문**: 날짜 클릭 시 사용자에게 피드백을 제공할까요?

**답변**: A) 피드백 없음.

## 기능 명세서

### 목적

캘린더의 날짜 셀을 클릭하여 해당 날짜로 일정을 빠르게 생성할 수 있도록 하는
기능입니다.

### 기능 요구사항

#### FR1: 날짜 셀 클릭으로 날짜 자동 설정

- **설명**: 월 뷰와 주 뷰의 날짜 셀(TableCell)을 클릭하면 해당 날짜가 일정
  폼의 날짜 필드에 자동으로 설정됩니다.
- **입력**: 사용자가 월/주 뷰의 날짜 셀을 클릭
- **출력**: 일정 폼의 날짜 필드에 클릭한 날짜가 YYYY-MM-DD 형식으로 설정됨
- **제약사항**:
  - 빈 날짜 셀만 클릭 가능 (일정이 있는 셀은 클릭 불가)
  - 날짜 형식은 `formatDate` 유틸리티 함수를 사용하여 생성

#### FR2: 기존 일정이 있는 셀 클릭 방지

- **설명**: 해당 날짜에 이미 일정이 있는 경우, 셀 클릭 시 아무 동작도 하지
  않습니다.
- **입력**: 일정이 있는 날짜 셀 클릭
- **출력**: 아무 동작 없음
- **판단 기준**: `getEventsForDay` 함수로 해당 날짜의 일정 존재 여부 확인

#### FR3: 시간 필드 빈 값 유지

- **설명**: 날짜 클릭 시 시작 시간과 종료 시간 필드는 빈 값으로 유지됩니다.
- **입력**: 날짜 셀 클릭
- **출력**: 시작 시간, 종료 시간 필드는 빈 문자열 유지

#### FR4: 편집 모드 선택 다이얼로그

- **설명**: 현재 일정을 편집 중인 상태에서 날짜를 클릭하면, 사용자에게 선택 다이얼로그를 표시합니다. 사용자는 편집 모드를 취소하고 새 일정을 생성할지, 아니면 편집 모드를 유지할지 선택할 수 있습니다.
- **입력**: 편집 중인 상태에서 날짜 셀 클릭
- **출력**: 다이얼로그 표시
- **다이얼로그**:
  - 타입: 확인/취소 다이얼로그 (기존 Dialog 컴포넌트 활용)
  - 메시지: "편집 중인 일정이 있습니다. 편집을 취소하고 새 일정을 생성하시겠습니까?"
  - 버튼:
    - "편집 취소" 버튼: 편집 모드를 취소하고 새 일정 생성 모드로 전환
      - 편집 모드 취소 (editingEvent를 null로 설정)
      - 폼 리셋 (resetForm 호출)
      - 선택한 날짜로 날짜 필드 설정
    - "편집 유지" 버튼: 편집 모드를 유지하고 다이얼로그만 닫음
      - 편집 모드 유지 (editingEvent 상태 유지)
      - 폼 상태 유지
      - 날짜 필드 변경 없음

#### FR5: 월/주 뷰 모두 지원

- **설명**: 월 뷰와 주 뷰 모두에서 동일하게 날짜 클릭 기능이 동작합니다.
- **입력**: 월 뷰 또는 주 뷰의 날짜 셀 클릭
- **출력**: 두 뷰 모두에서 동일한 동작 수행

### 기술적 요구사항

#### TR1: 날짜 형식 변환

- `formatDate(currentDate, day)` 함수를 사용하여 날짜 문자열 생성
- 월 뷰: `currentDate`와 `day` (숫자)를 사용
- 주 뷰: `weekDates` 배열의 Date 객체를 사용하여 날짜 문자열 생성

#### TR2: 기존 패턴 준수

- `useEventForm` 훅의 `setDate` 함수 사용
- `resetForm` 함수를 통한 폼 리셋
- 기존 Dialog 컴포넌트 패턴 활용 (편집 모드 취소 다이얼로그)

#### TR3: 이벤트 핸들링

- `TableCell`에 `onClick` 이벤트 핸들러 추가
- 클릭 이벤트는 빈 셀(일정이 없는 셀)에서만 동작
- 이벤트 전파 방지 불필요 (기본 동작으로 충분)

### 사용자 시나리오

#### 시나리오 1: 정상적인 날짜 클릭

1. 사용자가 월 뷰 또는 주 뷰를 확인
2. 일정이 없는 날짜 셀을 클릭
3. 일정 폼의 날짜 필드에 클릭한 날짜가 자동 입력됨
4. 사용자가 나머지 정보(제목, 시간 등)를 입력하여 일정 생성

#### 시나리오 2: 일정이 있는 셀 클릭

1. 사용자가 일정이 있는 날짜 셀을 클릭
2. 아무 동작도 발생하지 않음
3. 폼의 상태는 변경되지 않음

#### 시나리오 3: 편집 중 날짜 클릭 - 편집 취소 선택

1. 사용자가 기존 일정을 편집 중
2. 다른 날짜 셀을 클릭
3. 다이얼로그가 표시되어 "편집 중인 일정이 있습니다. 편집을 취소하고 새 일정을 생성하시겠습니까?" 메시지 표시
4. "편집 취소" 버튼 클릭
5. 편집 모드가 취소되고, 선택한 날짜로 새 일정 생성 모드로 전환
6. 폼이 리셋되고 날짜 필드만 클릭한 날짜로 설정됨

#### 시나리오 4: 편집 중 날짜 클릭 - 편집 유지 선택

1. 사용자가 기존 일정을 편집 중
2. 다른 날짜 셀을 클릭
3. 다이얼로그가 표시되어 "편집 중인 일정이 있습니다. 편집을 취소하고 새 일정을 생성하시겠습니까?" 메시지 표시
4. "편집 유지" 버튼 클릭
5. 편집 모드가 유지되고, 폼 상태는 변경되지 않음
6. 다이얼로그만 닫히고 편집을 계속할 수 있음

### 제외 사항

- 스낵바 메시지 표시 (피드백 없음)
- 시간 자동 설정
- 드래그 앤 드롭 기능 (별도 기능)
- 일정이 있는 셀에서 편집 모드로 전환하는 기능

### 테스트 고려사항

- 월 뷰와 주 뷰 모두에서 동작 검증
- 일정이 있는 셀 클릭 시 무시되는지 검증
- 편집 모드에서 날짜 클릭 시 다이얼로그 표시 검증
- 다이얼로그에서 "편집 취소" 선택 시 편집 모드 취소 및 새 일정 생성 모드 전환 검증
- 다이얼로그에서 "편집 유지" 선택 시 편집 모드 유지 및 폼 상태 유지 검증
- 날짜 형식이 올바르게 설정되는지 검증
- 시간 필드가 빈 값으로 유지되는지 검증
